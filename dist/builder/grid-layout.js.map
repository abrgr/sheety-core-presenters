{"version":3,"sources":["../../src/builder/grid-layout.js"],"names":["makeGridPresenter","presenter","GridPresenter","config","renderPresenter","path","onSelectPresenterForEditing","rows","get","map","row","rowIdx","marginTop","marginBottom","cell","cellIdx","cellPath","concat","cellPresenter","evt","stopPropagation","schema"],"mappings":";;;;;kBAGwBA,iB;;AAHxB;;;;AACA;;;;AAEe,SAASA,iBAAT,CAA2BC,SAA3B,EAAsC;AACnD,MAAMC,gBAAgB,SAAhBA,aAAgB,OAKhB;AAAA,2BAJJC,MAII;AAAA,QAJJA,MAII,+BAJK,oBAIL;AAAA,QAHJC,eAGI,QAHJA,eAGI;AAAA,QAFJC,IAEI,QAFJA,IAEI;AAAA,QADJC,2BACI,QADJA,2BACI;;AACJ,QAAMC,OAAOJ,OAAOK,GAAP,CAAW,MAAX,EAAmB,qBAAnB,CAAb;;AAEA,WACE;AAAA;AAAA,QAAK,WAAU,WAAf;AACGD,WAAKE,GAAL,CAAS,UAACC,GAAD,EAAMC,MAAN;AAAA,eACR;AAAA;AAAA;AACE,0BAAYA,MADd;AAEE,mBAAO,EAACC,WAAW,EAAZ,EAAgBC,cAAc,EAA9B,EAFT;AAGE,uBAAU,KAHZ;AAIGH,cAAID,GAAJ,CAAQ,UAACK,IAAD,EAAOC,OAAP,EAAmB;AAC1B,gBAAMC,WAAWX,KAAKY,MAAL,CAAY,CAAC,QAAD,EAAW,MAAX,EAAmBN,MAAnB,EAA2BI,OAA3B,EAAoC,WAApC,CAAZ,CAAjB;AACA,gBAAMG,gBAAgBJ,KAAKN,GAAL,CAAS,WAAT,CAAtB;;AAEA,mBACE;AAAA;AAAA;AACE,+BAAaO,OADf;AAEE,oCAAkBD,KAAKN,GAAL,CAAS,OAAT,CAFpB;AAGG,eAAC,CAACU,aAAF,GACGd,gBAAgBY,QAAhB,EAA0BE,aAA1B,CADH,GAGG;AAAA;AAAA;AACE,2BAAS,iBAACC,GAAD,EAAS;AAChBA,wBAAIC,eAAJ;AACAd,gDAA4BU,QAA5B;AACD,mBAJH;AAAA;AAAA;AANN,aADF;AAiBD,WArBA;AAJH,SADQ;AAAA,OAAT;AADH,KADF;AAiCD,GAzCD;;AA2CA,SAAOf,UAAU;AACfoB,YAAQ,uBAAO;AACb,iBAAW,gCADE;AAEb,aAAO,+DAFM;AAGb,eAAS,aAHI;AAIb,qBAAe,iDAJF;AAKb,cAAQ,QALK;AAMb,oBAAc;AACZ,cAAM;AACJ,mBAAS,YADL;AAEJ,yBAAe,qEAFX;AAGJ,kBAAQ,QAHJ;AAIJ,qBAAW;AAJP,SADM;AAOZ,gBAAQ;AACN,mBAAS,aADH;AAEN,qBAAW;AAFL,SAPI;AAWZ,kBAAU;AACR,mBAAS,eADD;AAER,yBAAe,6BAFP;AAGR,kBAAQ,QAHA;AAIR,qBAAW,EAJH;AAKR,wBAAc;AACZ,oBAAQ;AACN,uBAAS,MADH;AAEN,6BAAe,8BAFT;AAGN,sBAAQ,OAHF;AAIN,0BAAY,KAJN;AAKN,uBAAS;AACP,yBAAS,KADF;AAEP,wBAAQ,OAFD;AAGP,4BAAY,KAHL;AAIP,yBAAS;AACP,2BAAS,MADF;AAEP,0BAAQ,QAFD;AAGP,6BAAW,EAHJ;AAIP,8BAAY,KAJL;AAKP,gCAAc;AACZ,6BAAS;AACP,+BAAS,OADF;AAEP,qCAAe,+CAFR;AAGP,8BAAQ,SAHD;AAIP,iCAAW,CAJJ;AAKP,iCAAW,EALJ;AAMP,kCAAY;AANL,qBADG;AASZ,iCAAa;AACX,+BAAS,WADE;AAEX,qCAAe,uCAFJ;AAGX,8BAAQ,yEAHG;AAIX,kCAAY;AAJD;AATD;AALP;AAJF;AALH;AADI;AALN;AAXE;AAND,KAAP;AADO,GAAV,EA6DJnB,aA7DI,CAAP;AA8DD","file":"grid-layout.js","sourcesContent":["import React from 'react';\nimport { fromJS, Map, List } from 'immutable';\n\nexport default function makeGridPresenter(presenter) {\n  const GridPresenter = ({\n    config = new Map(),\n    renderPresenter,\n    path,\n    onSelectPresenterForEditing\n  }) => {\n    const rows = config.get('rows', new List());\n\n    return (\n      <div className=\"container\">\n        {rows.map((row, rowIdx) => (\n          <div\n            key={`row-${rowIdx}`}\n            style={{marginTop: 20, marginBottom: 20}}\n            className=\"row\">\n            {row.map((cell, cellIdx) => {\n              const cellPath = path.concat(['config', 'rows', rowIdx, cellIdx, 'presenter']);\n              const cellPresenter = cell.get('presenter');\n\n              return (\n                <div\n                  key={`cell-${cellIdx}`}\n                  className={`col-${cell.get('width')}`}>\n                  {!!cellPresenter\n                    ? renderPresenter(cellPath, cellPresenter)\n                    : (\n                      <button\n                        onClick={(evt) => {\n                          evt.stopPropagation();\n                          onSelectPresenterForEditing(cellPath);\n                        }}>\n                        Set presenter\n                      </button>\n                    )}\n                </div>\n              );\n            })}\n          </div>\n        ))}\n      </div>\n    );\n  };\n\n  return presenter({\n    schema: fromJS({\n      \"$schema\": \"http://json-schema.org/schema#\",\n      \"$id\": \"http://sheetyapp.com/schemas/core-presenters/grid-layout.json\",\n      \"title\": \"Grid Layout\",\n      \"description\": \"Grid Layout renders other presenters in a grid.\",\n      \"type\": \"object\",\n      \"properties\": {\n        \"id\": {\n          \"title\": \"Identifier\",\n          \"description\": \"A unique identifier for this presenter.  Used for analytics events.\",\n          \"type\": \"string\",\n          \"default\": \"\"\n        },\n        \"type\": {\n          \"const\": \"grid-layout\",\n          \"default\": \"grid-layout\"\n        },\n        \"config\": {\n          \"title\": \"Configuration\",\n          \"description\": \"Pre-specified configuration\",\n          \"type\": \"object\",\n          \"default\": {},\n          \"properties\": {\n            \"rows\": {\n              \"title\": \"Rows\",\n              \"description\": \"Specifies a row of the grid.\",\n              \"type\": \"array\",\n              \"linkable\": false,\n              \"items\": {\n                \"title\": \"Row\",\n                \"type\": \"array\",\n                \"linkable\": false,\n                \"items\": {\n                  \"title\": \"Cell\",\n                  \"type\": \"object\",\n                  \"default\": {},\n                  \"linkable\": false,\n                  \"properties\": {\n                    \"width\": {\n                      \"title\": \"Width\",\n                      \"description\": \"Number of columns this presenter will occupy.\",\n                      \"type\": \"integer\",\n                      \"minimum\": 1,\n                      \"maximum\": 12,\n                      \"linkable\": false\n                    },\n                    \"presenter\": {\n                      \"title\": \"Presenter\",\n                      \"description\": \"The presenter to render in this cell.\",\n                      \"$ref\": \"http://sheetyapp.com/schemas/core-presenters/configurers/presenter.json\",\n                      \"linkable\": false\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    })\n  })(GridPresenter);\n}\n"]}