{"version":3,"sources":["../../src/builder/link.js"],"names":["makeLinkPresenter","presenter","LinkPresenter","config","mapData","renderPresenter","get","url","child","isExternalLink","parse","host","schema"],"mappings":";;;;;kBAKwBA,iB;;AALxB;;;;AACA;;AACA;;AACA;;;;;;AAEe,SAASA,iBAAT,CAA2BC,SAA3B,EAAsC;AACnD,MAAMC,gBAAgB,SAAhBA,aAAgB,OAA0C;AAAA,QAAvCC,MAAuC,QAAvCA,MAAuC;AAAA,QAA/BC,OAA+B,QAA/BA,OAA+B;AAAA,QAAtBC,eAAsB,QAAtBA,eAAsB;;AAC9D,QAAMJ,YAAYE,OAAOG,GAAP,CAAW,WAAX,CAAlB;AACA,QAAMC,MAAMH,QAAQE,GAAR,CAAY,KAAZ,CAAZ;AACA,QAAME,QAAQP,YAAYI,gBAAgB,CAAC,QAAD,EAAW,WAAX,CAAhB,EAAyCJ,SAAzC,CAAZ,GAAkE,IAAhF;AACA,QAAMQ,iBAAiB,cAAIC,KAAJ,CAAUH,GAAV,EAAeI,IAAtC;;AAEA,QAAKF,cAAL,EAAsB;AACpB,aACE;AAAA;AAAA,UAAG,MAAMF,GAAT;AACGC;AADH,OADF;AAKD;;AAED,WACE;AAAA;AAAA,QAAM,IAAID,GAAV;AACGC;AADH,KADF;AAKD,GAnBD;;AAqBA,SAAOP,UAAU;AACfW,YAAQ,uBAAO;AACb,iBAAW,gCADE;AAEb,aAAO,wDAFM;AAGb,eAAS,MAHI;AAIb,qBAAe,4BAJF;AAKb,cAAQ,QALK;AAMb,oBAAc;AACZ,cAAM;AACJ,mBAAS,YADL;AAEJ,yBAAe,qEAFX;AAGJ,kBAAQ,QAHJ;AAIJ,qBAAW;AAJP,SADM;AAOZ,gBAAQ;AACN,mBAAS,MADH;AAEN,qBAAW;AAFL,SAPI;AAWZ,mBAAW;AACT,mBAAS,eADA;AAET,yBAAe,8IAFN;AAGT,kBAAQ,QAHC;AAIT,qBAAW,EAJF;AAKT,wBAAc;AACZ,mBAAO;AACL,uBAAS,KADJ;AAEL,6BAAe,qBAFV;AAGL,sBAAQ,QAHH;AAIL,yBAAW;AAJN;AADK;AALL,SAXC;AAyBZ,kBAAU;AACR,mBAAS,eADD;AAER,yBAAe,6BAFP;AAGR,kBAAQ,QAHA;AAIR,qBAAW,EAJH;AAKR,wBAAc;AACZ,yBAAa;AACX,uBAAS,WADE;AAEX,6BAAe,sFAFJ;AAGX,sBAAQ,yEAHG;AAIX,0BAAY;AAJD;AADD;AALN;AAzBE;AAND,KAAP;AADO,GAAV,EAgDJV,aAhDI,CAAP;AAiDD","file":"link.js","sourcesContent":["import React from 'react';\nimport { fromJS } from 'immutable';\nimport { Link } from 'react-router-dom'\nimport URL from 'url';\n\nexport default function makeLinkPresenter(presenter) {\n  const LinkPresenter = ({ config, mapData, renderPresenter }) => {\n    const presenter = config.get('presenter');\n    const url = mapData.get('url');\n    const child = presenter ? renderPresenter(['config', 'presenter'], presenter) : null;\n    const isExternalLink = URL.parse(url).host;\n\n    if ( isExternalLink ) {\n      return (\n        <a href={url}>\n          {child}\n        </a>\n      );\n    }\n\n    return (\n      <Link to={url}>\n        {child}\n      </Link>\n    );\n  };\n\n  return presenter({\n    schema: fromJS({\n      \"$schema\": \"http://json-schema.org/schema#\",\n      \"$id\": \"http://sheetyapp.com/schemas/core-presenters/link.json\",\n      \"title\": \"Link\",\n      \"description\": \"Internal or external links\",\n      \"type\": \"object\",\n      \"properties\": {\n        \"id\": {\n          \"title\": \"Identifier\",\n          \"description\": \"A unique identifier for this presenter.  Used for analytics events.\",\n          \"type\": \"string\",\n          \"default\": \"\"\n        },\n        \"type\": {\n          \"const\": \"link\",\n          \"default\": \"link\"\n        },\n        \"mapData\": {\n          \"title\": \"Configuration\",\n          \"description\": \"Pre-set values and formulas that will be evaluated against the spreadsheet that will determine the appearance and behavior of this presenter\",\n          \"type\": \"object\",\n          \"default\": {},\n          \"properties\": {\n            \"url\": {\n              \"title\": \"URL\",\n              \"description\": \"The URL to link to.\",\n              \"type\": \"string\",\n              \"default\": \"\"\n            }\n          }\n        },\n        \"config\": {\n          \"title\": \"Configuration\",\n          \"description\": \"Pre-specified configuration\",\n          \"type\": \"object\",\n          \"default\": {},\n          \"properties\": {\n            \"presenter\": {\n              \"title\": \"Presenter\",\n              \"description\": \"The presenter to render that, when clicked, will take the user to the specified URL.\",\n              \"$ref\": \"http://sheetyapp.com/schemas/core-presenters/configurers/presenter.json\",\n              \"linkable\": false\n            }\n          }\n        }\n      }\n    })\n  })(LinkPresenter);\n}\n"]}